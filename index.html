<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
  <!-- iOS/Safari用 -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <!-- Android/Chrome用 -->
  <meta name="mobile-web-app-capable" content="yes">
</head>
<style type="text/css">
html,body{
    height: 100%;
	background-color: red;
}	
.view{
width:100%;
height:100%;
position: relative;
background-color: blue;
}
#video {
height:100%;
object-fit:cover;
}
#video2 {
width:20%;
position: absolute;
bottom:50px;
right:50px;
border-radius: 10px;
}
#start{
	top:0;
	left:0;
	position:absolute;
	}
</style>
<body>
<div class="view">
<video id="video"  autoplay playsinline></video>
<video id="video2" autoplay loop></video>
</div>
<br>
<div class="start">
<input type="file" id="filename" value="ファイル読み込み"/>
</div>
<script>
function requestFullscreen(target) {
	if (target.webkitRequestFullscreen) {
		target.webkitRequestFullscreen(); //Chrome15+, Safari5.1+, Opera15+
	} else if (target.mozRequestFullScreen) {
		target.mozRequestFullScreen(); //FF10+
	} else if (target.msRequestFullscreen) {
		target.msRequestFullscreen(); //IE11+
	} else if (target.requestFullscreen) {
		target.requestFullscreen(); // HTML5 Fullscreen API仕様
	} else {
	}
}

    const constraints = {
        audio: false,  // オーディオデバイスは使用しない
        video: {
    facingMode: {
      exact: "environment"
    }
  }
    };

    var f = document.getElementById("filename");
    f.addEventListener( "change", function (event) {

      navigator.mediaDevices.getUserMedia(constraints)
        .then(function (stream) {document.getElementById("video").srcObject = stream;});

      var URL = URL || webkitURL;
      var file = event.target.files[0];
      document.getElementById("video2").src = URL.createObjectURL(file);
      document.getElementsByClassName("view")[0].style.display="inline";
      document.getElementsByClassName("start")[0].style.display="none";
      requestFullscreen(document.getElementsByClassName("view")[0]);
    }, false );
document.getElementsByClassName("view")[0].style.display="none";	
</script>
</html>
