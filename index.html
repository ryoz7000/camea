<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
  <!-- iOS/Safari用 -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <!-- Android/Chrome用 -->
  <meta name="mobile-web-app-capable" content="yes">
</head>
<style type="text/css">

* {
margin: 0px;
padding: 0px;
}

html,body{
	height: 100%;
	background-color: red;
}	
.view {
	position:relative;
	width:100%;
	height:100%;
	background-color: skyblue;
	}
#video {
object-fit: cover;
}
#video2 {
	position:absolute;
	width:20%;
	bottom:10px;
	right:10x;
}
#filename{
position: absolute;
font-size:60px;
}
</style>
<body>
<div class="view">
<video id="video"  autoplay ></video>
<input type="file" id="filename"/>
<video id="video2" autoplay loop></video>
</div>
<br>

<script>
function requestFullscreen(target) {
	if (target.webkitRequestFullscreen) {
		target.webkitRequestFullscreen(); //Chrome15+, Safari5.1+, Opera15+
	} else if (target.mozRequestFullScreen) {
		target.mozRequestFullScreen(); //FF10+
	} else if (target.msRequestFullscreen) {
		target.msRequestFullscreen(); //IE11+
	} else if (target.requestFullscreen) {
		target.requestFullscreen(); // HTML5 Fullscreen API仕様
	}
}

const constraints ={ audio: false, video: { facingMode: "environment" } };

navigator.mediaDevices.getUserMedia(constraints).then(function (stream) {document.getElementById("video").srcObject = stream;});
document.getElementById("video").style.width="100%";
document.getElementById("video").style.height="100%";
requestFullscreen(document.getElementsByClassName("view")[0]);

var f = document.getElementById("filename");
f.addEventListener( "change", function (event) {
    var URL = URL || webkitURL;
    var file = event.target.files[0];
    document.getElementById("video2").src = URL.createObjectURL(file);
    document.getElementById("filename").style.display="none";
}, false );

</script>
</html>
